---
title: 'Basic CLI: Find Files and Directories, and Compare '
excerpt: 'How to find files and directories, and compare files and directories.'
category: 'snippet'
status: 'published'
tags:
  - 'Bash/Shell'
date: 'Apr 15, 2019'
---

- Find files or directories, you can use the `find` command. For example, to find all files in the current directory that end with ".txt," you would type `find . -name "*.txt"`.
- Compare the content of two files, you can use the `diff` command. For example, to compare the content of "file1.txt" and "file2.txt," you would type `diff file1.txt file2.txt`.

## which

One of the common tools is `which`. This tool returns the path to the file or link that should be executed. This allows us to determine if specific programs, like `cURL`, `netcat`, `wget`, `python`, `gcc`, are available on the operating system. Let us use it to search for Python in our interactive instance

- `which python`

## find

Besides the function to find files and folders, this tool also contains the function to filter the results. We can use filter parameters like the size of the file or the date. We can also specify if we only search for files or folders.

- Syntax - `find [location] [option]`
  `find` - command used to find files and directories - prints the path where the files were found - it can be used to find files and directories by name, size, date, type, etc.
- `find  -name fileName` - finds all files and directories in your computer with the name `fileName` - the `-name` flag is used to specify the name of the file or directory that we are looking for
- `find . -name fileName` - finds all files and directories in the working directory and any subdirectory with the name `fileName` - the `.` flag is used to specify the current directory
- `find / -type f -name *.cfg -user root -size +20k -newermt 2020-03-03 -exec ls -al {}; 2>/dev/null`
  - `-type f` define the type of the searched object. In this case, '`f`' stands for '`file`'
  - `-name *.conf` - with '`-name`', we indicate the name of the file we are looking for. The asterisk (`*`) stands for 'all' files with the '`.conf`' extension.
  - `-user root` This option filters all files whose owner is the root user.
  - `-size +20k` - We can then filter all the located files and specify that we only want to see the files that are larger than 20 KiB.
  - `-newermt 2020-03-03` - With this option, we set the date. Only files newer than the specified date will be presented.
  - `-exec ls -al {} \;` - This option executes the specified command, using the curly brackets as placeholders for each result. The backslash escapes the next character from being interpreted by the shell because otherwise, the semicolon would terminate the command and not reach the redirection.
  - `2>/dev/null` This is a `STDERR` redirection to the '`null device`', - this redirection ensures that no errors are displayed in the terminal. This redirection must `not` be an option of the 'find' command.
- `find / -type f -iname *.conf -size +20k -size -25k -newermt 2020-03-03 -exec ls -al {}\; 2>/dev/null`
  - find all `*.conf` files, bigger than 20k and smaller than 25k, created after 2020-03-03
- `find / -type f -iname "*.bak" 2>/dev/null | wc -l`
  - get how many files exist on the system that have the `*.bak` extension
- `find / -name "xxd" 2>/dev/null`
  - find all `xxd` files

## using logical operators - `-and`, `-or` and `-not`

- `find -name "*chick*" -or -name "*kitty*"`
- `find -type -f -not -name "*.html*"`
- `find -cmin -60 -not -name "*.log*"`
  - anything modified withing te last 60 min and not named `*.log`
- we can use `&&`, `||` or `!` for logical operators

## `find -exec`

Provide `find` with our own action to perform using each matching pathname:

- `find -exec command {}`
  - `{}` are a placeholder for the current pathname (ech match), and the semicolon is required to indicate the end of the command
- `find ~ -type f -empty -exec ls -l '{}' ';'`
  - find all files in root(`~`) that are `-empty` and then `-execute ls -l` on eahc path that is passed
  - the `-exec ls -l` will be run once for each file
- `find ~ -type f -empty -ok ls -l '{}' ';'`
  - the `-ok` will ask the user if agrees with each match
- `find -type f -name "*.html*" -exec cp '{}' '{}-COPY' ';'`
  - find all files that end with .html
  - create a copy of each using the cp command
  - each of the copies ends with "-COPY", so we will end up with files like "index.html-COPY"
- `find ! -empty -exec cp '{}' '{}-BKP' ';'`
  - find all files that are not empty
  - make a copy of each adding `-BKP` to the end of each
- `find -name "*.txt" | xargs ls -la*`

  - `xargs` will bundle all arguments passed through STDIN from previous command and turn them into a single argument list

## locate

- `locate fileName` - command used to find files and filesystem - it searches through a prebuilt database of files generated by `updatedb` command or by a daemon - it operates significantly faster than `find`, but requires regular updating of the database;